---
import PageLoader from '@/components/PageLoader/index.astro';
import updatePath from '@/libs/updatePath';
---

<PageLoader isOpening={true} />
<div
  id="opening-bg"
  class="fixed left-0 top-0 z-50 h-lvh w-screen transition-all duration-700 bg-mine-shaft-texture [&.is-hidden]:invisible [&.is-hidden]:opacity-0"
>
</div>
<section id="hero" class="relative">
  <div id="hero-container">
    <div
      class="flex h-lvh flex-col justify-center overflow-y-hidden py-16 text-silver-chalice bg-mine-shaft-texture contents-full"
    >
      <div
        class="flex flex-col justify-center lg:grid lg:grid-cols-3 lg:items-end"
      >
        <div
          class="relative z-0 mx-auto inline-block h-72 w-72 overflow-hidden md:col-start-2 md:h-[50vw] md:w-[50vw] lg:mx-0 lg:h-[34rem] lg:w-[34rem]"
        >
          <canvas id="moon" class="h-full w-full" width="600" height="600"
          ></canvas>
        </div>

        <p class="ml-auto mt-4 hidden w-96 font-serif-en md:block lg:m-0">
          I am Taiki Sato, a visual designer. <br />I am good at balancing
          logical and intuitive thinking, function and emotion, stillness and
          movement, and seeking and expressing the best visual expression that
          fulfills user needs and objectives.
        </p>
      </div>

      <div
        id="hero-video"
        class="is-loading absolute left-1/2 top-0 z-0 h-full w-screen -translate-x-1/2 overflow-hidden opacity-50 mix-blend-multiply transition-all duration-700 [&.is-loading]:z-50"
      >
        <video
          poster={updatePath('/top/hero/shadow-image.png')}
          webkit-playsinline
          preload="auto"
          playsinline
          muted
          autoplay
          loop
          class="h-full w-full object-cover"
        >
          <source
            src={updatePath('/top/hero/shadow-movie.mp4')}
            type="video/mp4"
          />
        </video>
      </div>

      <p class="mt-14 font-serif-en md:text-xl">
        WEB DESIGN / GRAPHIC DESIGN / ART DIRECTION
      </p>

      <h1
        class="mt-3 flex items-end justify-between gap-4 md:mt-0 md:justify-normal md:gap-10"
      >
        <picture
          id="hero-logo"
          class="is-loading relative max-w-[19.6rem] md:max-w-[85rem] [&.is-loading]:z-50"
        >
          <source
            srcset={updatePath('/top/hero/fv-moving.png')}
            media="(min-width: 768px)"
          />
          <img
            src={updatePath('/top/hero/fv-moving-sp.png')}
            alt="TAIKI SATO"
          />
        </picture>

        <span class="inline-flex flex-col text-taupe-gray vertical-rl">
          <span
            class="whitespace-pre-line font-serif-en text-sm leading-none md:text-lg"
          >
            <span>(PORTFOLIO)</span>
          </span>
          <span
            class="whitespace-pre-line text-[2rem] font-medium leading-none md:text-5xl"
          >
            <span>作品集</span>
          </span>
        </span>
      </h1>
    </div>

    <div
      class="scroll-nav absolute bottom-[5px] right-0 z-0 hidden h-[17.5rem] w-[1px] bg-emperor md:block"
    >
      <div class="relative h-full w-full">
        <div
          class="scroll-nav__inside absolute left-0 top-0 h-10 w-full bg-silver-chalice"
        >
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  import loading from './loading';
  import animation from './animation';
  loading();
  animation();
</script>

<style lang="scss">
  video {
    &::-webkit-media-controls-panel {
      display: none !important;
      -webkit-appearance: none;
    }

    &:state(webkit-media-controls-play-button) {
      display: none !important;
      -webkit-appearance: none;
    }

    &::-webkit-media-controls-start-playback-button {
      display: none !important;
      -webkit-appearance: none;
    }
  }

  .scroll-nav__inside {
    animation: scrollNav 5s infinite;
  }

  @keyframes nextMaskText {
    0% {
      opacity: 0.2;
    }
    50% {
      opacity: 1;
    }
    100% {
      opacity: 0.2;
    }
  }

  @keyframes scrollNav {
    0% {
      top: 0;
      opacity: 1;
    }
    40% {
      top: 50%;
      opacity: 0.5;
    }
    80% {
      top: 100%;
      opacity: 0;
    }
    100% {
      top: 0;
      opacity: 0;
    }
  }
</style>
